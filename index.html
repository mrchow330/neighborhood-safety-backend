<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HoodWatch Backend API</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #eeeeeef6;
    }
    header {
      background-color: #0055be;
      color: white;
      padding: 1rem 0;
    }
    main {
      padding: 2rem;
    }
    footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #666;
    }
    .status {
      font-family: Arial, sans-serif;
      font-size: 4rem; /* Larger text size */
      margin-top: 6rem; /* Move it lower */
      text-transform: uppercase; /* Make text uppercase */
    }
    .status.ok {
      color: #00ff00; /* Bright green for "running" */
    }
    .status.error {
      color: #ff0000; /* Bright red for "down" */
    }
    .status.connecting {
      color: #ffa500; /* Orange for "maintainence" */
    }
  </style>
  <!-- Link to Google Fonts for retro style -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <h1>Welcome to the HoodWatch Backend API</h1>
  </header>
  <main>
    <p>This is the backend service for the Neighborhood Safety App.</p>
    <p>Use the API endpoints to interact with the system.</p>
    <p><a href="/api-tester.html" style="color: #0073ff; text-decoration: none;">Go to API Tester</a></p>
    <div id="healthStatus" class="status">Checking API health...</div>
  </main>
  <footer>
    <p>&copy; 2025 Team Prodigies</p>
  </footer>
  <script>
    async function fetchHealthStatus() {
  try {
    const response = await fetch('/api/health');
    if (!response.ok) throw new Error('Server returned an error');
    const health = await response.json();

    const healthStatus = document.getElementById('healthStatus');
    if (health.status === 'Server is running') {
      healthStatus.textContent = "Server is running";
      healthStatus.classList.remove('error', 'connecting');
      healthStatus.classList.add('ok');
    } else if (health.status === 'Server is connecting to the database') {
      healthStatus.textContent = "Server is under maintenance";
      healthStatus.classList.remove('ok', 'error');
      healthStatus.classList.add('connecting');
    } else {
      healthStatus.textContent = "Server is currently down";
      healthStatus.classList.remove('ok', 'connecting');
      healthStatus.classList.add('error');
    }
  } catch (error) {
    const healthStatus = document.getElementById('healthStatus');
    healthStatus.textContent = "Server is currently down";
    healthStatus.classList.remove('ok', 'connecting');
    healthStatus.classList.add('error');
  }
}
    fetchHealthStatus();
    setInterval(fetchHealthStatus, 5000); // Check every minute
  </script>
</body>
</html>